# /etc/apache2/sites-available/000-default.conf

<VirtualHost *:80>
    ServerAdmin webmaster@localhost
    DocumentRoot /var/www/html
    
    Alias /phpmyadmin /var/www/phpmyadmin

    <Directory /var/www/html/>
        Options Indexes FollowSymLinks
        AllowOverride all
        Require all granted
    </Directory>

    <Directory /var/www/phpmyadmin/>
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>

    # .php 파일을 PHP-FPM으로 넘기기 위한 설정
    # PHP-FPM은 컨테이너 내부의 localhost:9000에서 실행됩니다.
    <FilesMatch \.php$>
        SetHandler "proxy:fcgi://127.0.0.1:9000"
    </FilesMatch>

    ErrorLog ${APACHE_LOG_DIR}/error.log
    CustomLog ${APACHE_LOG_DIR}/access.log combined
</VirtualHost>